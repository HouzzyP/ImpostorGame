
export const dictionary = {
    es: {
        // Hero
        "hero.title": "El Impostor Online - Juego del Mentiroso Gratis",
        "hero.subtitle": "Juego de deducci√≥n social tipo <strong>Spyfall en Espa√±ol</strong>. Multijugador sin descargas, perfecto para videollamadas.<br>üîç ¬øPodr√°s descubrir al mentiroso?",
        "label.name": "Tu nombre",
        "placeholder.name": "Ingresa tu nombre",
        "btn.create": "Crear sala",
        "btn.join": "Unirse a sala",

        // Join
        "join.title": "Unirse",
        "join.subtitle": "Ingresa el codigo de la sala",
        "label.code": "Codigo de sala",
        "placeholder.code": "ABC123",
        "btn.join_action": "Unirse",
        "btn.back": "Volver",

        // Lobby
        "lobby.code_label": "Codigo de sala",
        "lobby.code_hint": "Toca para copiar",
        "lobby.invite": "Invitar Amigos",
        "lobby.players_title": "Jugadores",
        "lobby.config_title": "Configuracion",
        "lobby.category_label": "Categoria",
        "lobby.impostor_label": "Impostores",
        "btn.random_category": "Categoria aleatoria",
        "btn.start": "Iniciar partida",
        "lobby.min_players": "Minimo 4 jugadores",
        "lobby.ranking_title": "Ranking de Sala",
        "lobby.waiting_host": "Esperando al host...",

        // Table Headers
        "table.player": "Jugador",
        "table.played": "Jugadas",
        "table.correct": "Aciertos",
        "table.impostor": "Impostor",
        "table.innocent": "Inocente",
        "table.waiting": "Esperando datos...",

        // Role Screen
        "role.label": "Tu rol",
        "role.innocent": "Inocente",
        "role.impostor": "Impostor",
        "role.turn_order": "Orden de Turno",
        "btn.start_voting": "Iniciar votacion",
        "btn.cancel": "Cancelar partida",
        "role.waiting_host": "Esperando al host...",

        // Game Screen
        "game.round": "Ronda",
        "game.live_players": "Jugadores en Vivo",

        // Voting Screen
        "voting.title": "Votaci√≥n",
        "voting.timer_label": "Tiempo transcurrido",
        "voting.order_label": "Orden:",
        "voting.choose_label": "Elige a quien eliminar",
        "voting.turn_label": "Turno de votar",
        "voting.votes_title": "Votos",
        "voting.waiting": "Observando votaci√≥n...",

        // Elimination
        "elimination.continue": "Continuar",
        "elimination.eliminated": "fue eliminado",
        "elimination.was_impostor": "Era un impostor",
        "elimination.was_innocent": "Era inocente",

        // End Screen
        "end.innocent_win": "Ganaron los inocentes",
        "end.impostor_win": "Ganaron los impostores",
        "end.revealed_label": "La palabra era",
        "end.roles_title": "Roles revelados",
        "btn.continue_room": "Continuar en la sala",
        "btn.back_lobby": "Volver al lobby",
        "btn.exit": "Salir",

        // Modals
        "stats.title": "Mis Estad√≠sticas",
        "stats.imp_wins": "Victorias Impostor",
        "stats.games": "Partidas Jugadas",
        "stats.inn_wins": "Victorias Inocente",
        "stats.winrate": "Win Rate",

        "howto.title": "C√≥mo Jugar",
        "rules.title": "Reglas B√°sicas",
        "howto.title": "C√≥mo Jugar",
        "rules.title": "Reglas B√°sicas",
        "faq.title": "Preguntas Frecuentes",

        // Nav & Tooltips
        "nav.help": "Ayuda y Reglas",
        "nav.howto": "C√≥mo Jugar",
        "nav.rules": "Reglas",
        "nav.faq": "FAQ",
        "chat.open": "Abrir Chat",
        "theme.toggle": "Cambiar tema",

        // Footer
        "footer.credits": "Hecho con üíú en Argentina",
        "footer.coffee": "Invitame un cafecito",

        // JS Errors & Share
        "error.name_required": "Ingresa tu nombre",
        "error.name_short": "El nombre debe tener al menos 2 caracteres",
        "error.name_long": "El nombre no puede tener m√°s de 15 caracteres",
        "error.name_chars": "El nombre solo puede tener letras, n√∫meros y espacios",
        "error.code_required": "Ingresa el c√≥digo de sala",
        "error.code_length": "El c√≥digo de sala debe tener 4 caracteres",
        "share.text": "¬°Jug√° conmigo a El Impostor! üïµÔ∏è\nC√≥digo de sala: *{code}*\nEntr√° ac√°:",
        "share.copied": "Invitaci√≥n copiada al portapapeles",
        "share.copied_code": "Codigo copiado",

        "toast.joined": "¬°Te has unido a la partida!",
        "toast.became_host": "Ahora eres el host",
        "toast.category": "Categor√≠a: ",

        // Tooltips
        "tooltip.played": "Partidas Jugadas",
        "tooltip.correct": "Votos Correctos",
        "tooltip.impostor": "Victorias como Impostor",
        "tooltip.innocent": "Victorias como Inocente",

        // Footer
        "footer.like": "¬øTe gusta El Impostor?",

        // Stats Emoji
        // Stats Emoji
        "table.player": "üë§",
        "table.played": "üéÆ",
        "table.correct": "‚úÖ",
        "table.impostor": "üïµÔ∏è",
        "table.innocent": "üòá",

        // Modals Content
        "howto.roles_title": "üë• Roles",
        "howto.innocent": "<strong>Inocente:</strong> Recibe una palabra secreta. Debes describirla sutilmente.",
        "howto.impostor": "<strong>Impostor:</strong> NO recibe la palabra. Debe fingir que la sabe y descubrirla.",
        "howto.phase_title": "üó£Ô∏è Fase de Descripci√≥n",
        "howto.phase_desc": "Por turnos estrictos, cada jugador dice <strong>UNA SOLA PALABRA</strong>.",
        "howto.example": "<strong>Ejemplo:</strong> Palabra 'Perro' -> Tu dices 'Ladrido'.",
        "howto.voting_title": "üó≥Ô∏è Votaci√≥n",
        "howto.voting_desc": "Luego de la ronda de palabras, debaten y votan al sospechoso.",
        "howto.btn_full": "Ver Tutorial Completo",

        "rules.list_1": "<strong>M√≠nimo 4 jugadores</strong> para comenzar.",
        "rules.list_2": "<strong>UNA palabra</strong> por turno. Nada de frases.",
        "rules.list_3": "Se debe respetar el orden de turnos.",
        "rules.list_4": "Prohibido decir la palabra secreta.",
        "rules.list_5": "Gana la mayor√≠a o el impostor si sobrevive.",
        "rules.btn_full": "Ver Reglas Detalladas",

        "faq.q1": "¬øLos impostores se conocen?",
        "faq.a1": "No, si hay m√°s de uno, no saben qui√©nes son sus compa√±eros.",
        "faq.q2": "¬øQu√© pasa si me desconecto?",
        "faq.a2": "Puedes volver a entrar con el mismo nombre y recuperar√°s tu rol.",
        "faq.q3": "¬øC√≥mo gano puntos?",
        "faq.a3": "Ganando partidas y votando correctamente al impostor.",
        "faq.btn_full": "Ver Todas las FAQ"
    },
    en: {
        // Hero
        "hero.title": "The Impostor Online - Free Liar Game",
        "hero.subtitle": "Social deduction game like <strong>Spyfall</strong>. Multiplayer with no downloads, perfect for video calls.<br>üîç Can you spot the liar?",
        "label.name": "Your name",
        "placeholder.name": "Enter your name",
        "btn.create": "Create Room",
        "btn.join": "Join Room",

        // Join
        "join.title": "Join Room",
        "join.subtitle": "Enter the room code",
        "label.code": "Room Code",
        "placeholder.code": "ABC123",
        "btn.join_action": "Join",
        "btn.back": "Back",

        // Lobby
        "lobby.code_label": "Room Code",
        "lobby.code_hint": "Tap to copy",
        "lobby.invite": "Invite Friends",
        "lobby.players_title": "Players",
        "lobby.config_title": "Settings",
        "lobby.category_label": "Category",
        "lobby.impostor_label": "Impostors",
        "btn.random_category": "Random Category",
        "btn.start": "Start Game",
        "lobby.min_players": "Min 4 players",
        "lobby.ranking_title": "Room Ranking",
        "lobby.waiting_host": "Waiting for host...",

        // Table Headers
        "table.player": "Player",
        "table.played": "Played",
        "table.correct": "Correct",
        "table.impostor": "Impostor",
        "table.innocent": "Innocent",
        "table.waiting": "Waiting for data...",

        // Role Screen
        "role.label": "Your Role",
        "role.innocent": "Innocent",
        "role.impostor": "Impostor",
        "role.turn_order": "Turn Order",
        "btn.start_voting": "Start Voting",
        "btn.cancel": "Cancel Game",
        "role.waiting_host": "Waiting for host...",

        // Game Screen
        "game.round": "Round",
        "game.live_players": "Live Players",

        // Voting Screen
        "voting.title": "Voting",
        "voting.timer_label": "Time elapsed",
        "voting.order_label": "Order:",
        "voting.choose_label": "Choose who to eliminate",
        "voting.turn_label": "Voting Turn",
        "voting.votes_title": "Votes",
        "voting.waiting": "Watching voting...",

        // Elimination
        "elimination.continue": "Continue",
        "elimination.eliminated": "was eliminated",
        "elimination.was_impostor": "Was an Impostor",
        "elimination.was_innocent": "Was Innocent",

        // End Screen
        "end.innocent_win": "Innocents Won",
        "end.impostor_win": "Impostors Won",
        "end.revealed_label": "The word was",
        "end.roles_title": "Roles Revealed",
        "btn.continue_room": "Continue in Room",
        "btn.back_lobby": "Back to Lobby",
        "btn.exit": "Exit",

        // Modals
        "stats.title": "My Stats",
        "stats.imp_wins": "Impostor Wins",
        "stats.games": "Games Played",
        "stats.inn_wins": "Innocent Wins",
        "stats.winrate": "Win Rate",

        "howto.title": "How to Play",
        "rules.title": "Basic Rules",
        "howto.title": "How to Play",
        "rules.title": "Basic Rules",
        "faq.title": "FAQ",

        // Nav & Tooltips
        "nav.help": "Help & Rules",
        "nav.howto": "How to Play",
        "nav.rules": "Rules",
        "nav.faq": "FAQ",
        "chat.open": "Open Chat",
        "theme.toggle": "Toggle Theme",

        // Footer
        "footer.credits": "Made with üíú in Argentina",
        "footer.coffee": "Buy me a coffee",

        // JS Errors & Share
        "error.name_required": "Enter your name",
        "error.name_short": "Name must be at least 2 characters",
        "error.name_long": "Name cannot exceed 15 characters",
        "error.name_chars": "Name can only contain letters, numbers and spaces",
        "error.code_required": "Enter room code",
        "error.code_length": "Room code must be 4 characters",
        "share.text": "Play The Impostor with me! üïµÔ∏è\nRoom Code: *{code}*\nJoin here:",
        "share.copied": "Invitation copied to clipboard",
        "share.copied_code": "Code copied",

        "toast.joined": "You joined the game!",
        "toast.became_host": "You are now the host",
        "toast.category": "Category: ",

        // Tooltips
        "tooltip.played": "Games Played",
        "tooltip.correct": "Correct Votes",
        "tooltip.impostor": "Impostor Wins",
        "tooltip.innocent": "Innocent Wins",

        // Footer
        "footer.like": "Do you like The Impostor?",

        // Stats Emoji
        // Stats Emoji
        "table.player": "üë§",
        "table.played": "üéÆ",
        "table.correct": "‚úÖ",
        "table.impostor": "üïµÔ∏è",
        "table.innocent": "üòá",

        // Modals Content
        "howto.roles_title": "üë• Roles",
        "howto.innocent": "<strong>Innocent:</strong> Gets a secret word. Describe it subtly.",
        "howto.impostor": "<strong>Impostor:</strong> Gets NO word. Must fake it and guess the word.",
        "howto.phase_title": "üó£Ô∏è Description Phase",
        "howto.phase_desc": "Strict turns, each player says <strong>ONE WORD ONLY</strong>.",
        "howto.example": "<strong>Example:</strong> Word 'Dog' -> You say 'Bark'.",
        "howto.voting_title": "üó≥Ô∏è Voting",
        "howto.voting_desc": "After the round, discuss and vote for the suspect.",
        "howto.btn_full": "View Full Tutorial",

        "rules.list_1": "<strong>Min 4 players</strong> to start.",
        "rules.list_2": "<strong>ONE word</strong> per turn. No phrases.",
        "rules.list_3": "Must respect turn order.",
        "rules.list_4": "Forbidden to say the secret word.",
        "rules.list_5": "Majority wins or Impostor if they survive.",
        "rules.btn_full": "View Detailed Rules",

        "faq.q1": "Do impostors know each other?",
        "faq.a1": "No, if there are multiple, they don't know their partners.",
        "faq.q2": "What if I disconnect?",
        "faq.a2": "Join again with the same name to recover your role.",
        "faq.q3": "How do I earn points?",
        "faq.a3": "By winning games and voting correctly for the impostor.",
        "faq.btn_full": "View All FAQs"
    }
};

export let currentLang = localStorage.getItem('lang') || 'es';

export function t(key) {
    return dictionary[currentLang][key] || key;
}

export function setLanguage(lang) {
    if (!dictionary[lang]) {
        console.error(`Dictionary not found for: ${lang}`);
        return;
    }
    currentLang = lang;
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;
    updateDOM();
    updateLangBtn();
}

export function toggleLanguage() {
    const newLang = currentLang === 'es' ? 'en' : 'es';
    setLanguage(newLang);
}

// Global Expose (Safety Net)
window.toggleLanguage = toggleLanguage;

function updateDOM() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const text = t(key);
        if (el.tagName === 'INPUT' && el.getAttribute('placeholder')) {
            el.placeholder = text;
        } else {
            el.innerHTML = text; // innerHTML allows <strong> tags
        }
    });

    // Update Title Attributes (Tooltips)
    document.querySelectorAll('[data-i18n-title]').forEach(el => {
        const key = el.getAttribute('data-i18n-title');
        el.title = t(key);
    });

    // Update Flag Icon
    updateLangBtn();
}

function updateLangBtn() {
    const btn = document.getElementById('langBtn');
    if (btn) {
        btn.textContent = currentLang === 'es' ? 'üá∫üá∏' : 'üá¶üá∑';
        btn.title = currentLang === 'es' ? 'Switch to English' : 'Cambiar a Espa√±ol';
    }
}

// Auto-init
function initI18n() {
    // Attach Listener
    const btn = document.getElementById('langBtn');
    if (btn) {
        btn.addEventListener('click', toggleLanguage);
    } else {
        console.error('Language button not found');
    }

    // Initial Load
    setLanguage(currentLang);
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initI18n);
} else {
    initI18n();
}
